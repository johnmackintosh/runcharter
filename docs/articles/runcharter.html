<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>runcharter • runcharter</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="runcharter">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">runcharter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/runcharter.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/how-to-create-multiple-runcharts.html">How to create multiple runcharts</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/johnmackintosh/runcharter">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>runcharter</h1>
                        <h4 class="author">John MacKintosh</h4>
            
            <h4 class="date">2019-05-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/johnmackintosh/runcharter/blob/master/vignettes/runcharter.Rmd"><code>vignettes/runcharter.Rmd</code></a></small>
      <div class="hidden name"><code>runcharter.Rmd</code></div>

    </div>

    
    
<p>The rationale for the package is to analyse multiple run charts at once. More importantly, the package will identify a run of n successive points on the desired side of the median line, and will recalculate / rebase the median accordingly. Each time a run occurs, the median will be rebased. This helps to track improvements over time.</p>
<p>The default is to plot a faceted plot, allowing ggplot2 to handle the axis limits. You can specify the number of columns in the faceted plot, or let ggplot2 do its thing.</p>
<p>Here are the function arguments and defaults. A default run of 9 is specified as that is the length of run used by the IHI for its patient safety initiatives worldwide.</p>
<div id="function-arguments-and-defaults" class="section level1">
<h1 class="hasAnchor">
<a href="#function-arguments-and-defaults" class="anchor"></a>Function arguments and defaults</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(runcharter)
<span class="kw"><a href="../reference/runcharter.html">runcharter</a></span>(<span class="dt">df =</span> signals,
          <span class="dt">med_rows =</span> <span class="dv">13</span>,
          <span class="dt">runlength =</span> <span class="dv">9</span>,
          <span class="dt">line_colr =</span> <span class="st">"#005EB8"</span>,
          <span class="dt">point_colr =</span><span class="st">"#005EB8"</span>,
          <span class="dt">median_colr =</span> <span class="st">"#E87722"</span>,
          <span class="dt">sus_fill =</span> <span class="st">"#DB1884"</span>,
          <span class="dt">chart_title =</span> <span class="ot">NULL</span>,
          <span class="dt">chart_subtitle =</span> <span class="ot">NULL</span>, 
          <span class="dt">direction =</span> <span class="st">"below"</span>,
          <span class="dt">facet_cols =</span> <span class="ot">NULL</span>,
          <span class="dt">save_plot =</span> <span class="ot">FALSE</span>,
          <span class="dt">plot_extension =</span> <span class="st">"png"</span>)</code></pre></div>
<div id="faceted-plots---1-column" class="section level2">
<h2 class="hasAnchor">
<a href="#faceted-plots---1-column" class="anchor"></a>Faceted plots - 1 column</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(runcharter)

<span class="kw"><a href="../reference/runcharter.html">runcharter</a></span>(signals, <span class="dt">direction =</span> <span class="st">"below"</span>,
              <span class="dt">chart_title =</span> <span class="st">"facet test 1"</span>,
              <span class="dt">chart_subtitle =</span> <span class="st">" 1 column trellis using facet_wrap"</span>, 
              <span class="dt">facet_cols =</span> <span class="dv">1</span>)
<span class="co">#&gt; $runchart</span></code></pre></div>
<p><img src="runcharter_files/figure-html/unnamed-chunk-2-1.png" width="576"></p>
<pre><code>#&gt; 
#&gt; $median_rows
#&gt; # A tibble: 52 x 4
#&gt;    grp       y date       baseline
#&gt;    &lt;chr&gt; &lt;int&gt; &lt;date&gt;        &lt;int&gt;
#&gt;  1 WardX     9 2014-01-01       11
#&gt;  2 WardX    22 2014-02-01       11
#&gt;  3 WardX    19 2014-03-01       11
#&gt;  4 WardX    18 2014-04-01       11
#&gt;  5 WardX     8 2014-05-01       11
#&gt;  6 WardX     7 2014-06-01       11
#&gt;  7 WardX    11 2014-07-01       11
#&gt;  8 WardX    11 2014-08-01       11
#&gt;  9 WardX    11 2014-09-01       11
#&gt; 10 WardX    12 2014-10-01       11
#&gt; # ... with 42 more rows
#&gt; 
#&gt; $sustained
#&gt; # A tibble: 18 x 8
#&gt;    grp       y date       rungroup improve startdate  enddate    lastdate  
#&gt;    &lt;chr&gt; &lt;int&gt; &lt;date&gt;        &lt;dbl&gt;   &lt;int&gt; &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    
#&gt;  1 WardX     7 2016-12-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  2 WardX     5 2017-01-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  3 WardX     4 2017-02-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  4 WardX    10 2017-03-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  5 WardX     4 2017-04-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  6 WardX     9 2017-05-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  7 WardX     4 2017-06-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  8 WardX     8 2017-07-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  9 WardX     6 2017-08-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt; 10 WardY     7 2017-10-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 11 WardY     3 2017-11-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 12 WardY     8 2017-12-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 13 WardY    11 2018-01-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 14 WardY     7 2018-02-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 15 WardY     9 2018-03-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 16 WardY     8 2018-04-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 17 WardY     8 2018-05-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 18 WardY     7 2018-06-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 
#&gt; $StartBaseline
#&gt; [1] 11 13  4  7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(runcharter)

<span class="kw"><a href="../reference/runcharter.html">runcharter</a></span>(signals,
           <span class="dt">direction =</span> <span class="st">"below"</span>,
              <span class="dt">chart_title =</span> <span class="st">"facet test 2"</span>,
              <span class="dt">chart_subtitle =</span> <span class="st">" 2 column trellis using facet_wrap"</span>, 
              <span class="dt">facet_cols =</span> <span class="dv">2</span>)
<span class="co">#&gt; $runchart</span></code></pre></div>
<p><img src="runcharter_files/figure-html/unnamed-chunk-3-1.png" width="576"></p>
<pre><code>#&gt; 
#&gt; $median_rows
#&gt; # A tibble: 52 x 4
#&gt;    grp       y date       baseline
#&gt;    &lt;chr&gt; &lt;int&gt; &lt;date&gt;        &lt;int&gt;
#&gt;  1 WardX     9 2014-01-01       11
#&gt;  2 WardX    22 2014-02-01       11
#&gt;  3 WardX    19 2014-03-01       11
#&gt;  4 WardX    18 2014-04-01       11
#&gt;  5 WardX     8 2014-05-01       11
#&gt;  6 WardX     7 2014-06-01       11
#&gt;  7 WardX    11 2014-07-01       11
#&gt;  8 WardX    11 2014-08-01       11
#&gt;  9 WardX    11 2014-09-01       11
#&gt; 10 WardX    12 2014-10-01       11
#&gt; # ... with 42 more rows
#&gt; 
#&gt; $sustained
#&gt; # A tibble: 18 x 8
#&gt;    grp       y date       rungroup improve startdate  enddate    lastdate  
#&gt;    &lt;chr&gt; &lt;int&gt; &lt;date&gt;        &lt;dbl&gt;   &lt;int&gt; &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    
#&gt;  1 WardX     7 2016-12-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  2 WardX     5 2017-01-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  3 WardX     4 2017-02-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  4 WardX    10 2017-03-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  5 WardX     4 2017-04-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  6 WardX     9 2017-05-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  7 WardX     4 2017-06-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  8 WardX     8 2017-07-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt;  9 WardX     6 2017-08-01        1       6 2016-12-01 2017-08-01 2017-08-01
#&gt; 10 WardY     7 2017-10-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 11 WardY     3 2017-11-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 12 WardY     8 2017-12-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 13 WardY    11 2018-01-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 14 WardY     7 2018-02-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 15 WardY     9 2018-03-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 16 WardY     8 2018-04-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 17 WardY     8 2018-05-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 18 WardY     7 2018-06-01        1       8 2017-10-01 2018-06-01 2018-06-01
#&gt; 
#&gt; $StartBaseline
#&gt; [1] 11 13  4  7</code></pre>
</div>
<div id="runs-in-both-directions" class="section level2">
<h2 class="hasAnchor">
<a href="#runs-in-both-directions" class="anchor"></a>Runs in both directions</h2>
<p>Finding runs in both directions is now implemented:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(runcharter)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)
<span class="co">#&gt; Warning: package 'dplyr' was built under R version 3.5.2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
signals <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(grp <span class="op">==</span><span class="st"> "WardX"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/runcharter.html">runcharter</a></span>(<span class="dt">med_rows =</span> <span class="dv">6</span>, 
             <span class="dt">runlength =</span> <span class="dv">6</span>,
             <span class="dt">direction =</span> <span class="st">"both"</span>,
             <span class="dt">chart_title =</span> <span class="st">"Runs in both directions"</span>,
             <span class="dt">chart_subtitle =</span> <span class="st">"Runs of 6, from median calculated over first 6 rows"</span>)
<span class="co">#&gt; $runchart</span></code></pre></div>
<p><img src="runcharter_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
<pre><code>#&gt; 
#&gt; $median_rows
#&gt; # A tibble: 6 x 4
#&gt;   grp       y date       baseline
#&gt;   &lt;chr&gt; &lt;int&gt; &lt;date&gt;        &lt;dbl&gt;
#&gt; 1 WardX     9 2014-01-01     13.5
#&gt; 2 WardX    22 2014-02-01     13.5
#&gt; 3 WardX    19 2014-03-01     13.5
#&gt; 4 WardX    18 2014-04-01     13.5
#&gt; 5 WardX     8 2014-05-01     13.5
#&gt; 6 WardX     7 2014-06-01     13.5
#&gt; 
#&gt; $sustained
#&gt; # A tibble: 30 x 8
#&gt;    grp       y date       rungroup improve startdate  enddate    lastdate  
#&gt;    &lt;chr&gt; &lt;int&gt; &lt;date&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    
#&gt;  1 WardX    11 2014-07-01        1      11 2014-07-01 2014-12-01 2017-06-01
#&gt;  2 WardX    11 2014-08-01        1      11 2014-07-01 2014-12-01 2017-06-01
#&gt;  3 WardX    11 2014-09-01        1      11 2014-07-01 2014-12-01 2017-06-01
#&gt;  4 WardX    12 2014-10-01        1      11 2014-07-01 2014-12-01 2017-06-01
#&gt;  5 WardX     2 2014-11-01        1      11 2014-07-01 2014-12-01 2017-06-01
#&gt;  6 WardX     8 2014-12-01        1      11 2014-07-01 2014-12-01 2017-06-01
#&gt;  7 WardX    21 2015-07-01        2      17 2015-07-01 2015-12-01 2017-06-01
#&gt;  8 WardX    12 2015-08-01        2      17 2015-07-01 2015-12-01 2017-06-01
#&gt;  9 WardX    21 2015-09-01        2      17 2015-07-01 2015-12-01 2017-06-01
#&gt; 10 WardX    12 2015-10-01        2      17 2015-07-01 2015-12-01 2017-06-01
#&gt; # ... with 20 more rows
#&gt; 
#&gt; $StartBaseline
#&gt; [1] 13.5</code></pre>
</div>
<div id="design-decisions" class="section level2">
<h2 class="hasAnchor">
<a href="#design-decisions" class="anchor"></a>Design decisions</h2>
<p>This package makes no attempt to identify or highlight ‘trends’ (consecutively increasing or decreasing points) or shorter ‘shifts’ of runs below the median. In 8 years of working with QI data, I very rarely see trends, and when they do appear, they tend to result after a period of process degradation, when the process begins to return back to its natural median state.</p>
<p>In addition, <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0121349">research by qicharts2 author Jacob Anheoj shows that the trend rule is not reliable</a>. There are no plans to add tests to identify trends to the package functionality.</p>
<p>If you want to apply the rules for trend , in addition to rebasing run charts, then you should consider using <a href="https://github.com/jsphdms/runchart">the runchart package by Joseph Adams</a>.</p>
</div>
<div id="identify-runs-in-both-directions" class="section level2">
<h2 class="hasAnchor">
<a href="#identify-runs-in-both-directions" class="anchor"></a>Identify runs in both directions</h2>
<p>Th package now allows for finding runs in both directions (above and below the median). Generally, for improvement purposes, you would only need to identify runs in one direction at a time. In other words, if you are trying to reduce adverse events, improvement will be evidenced with a run below the median. Therefore, you would not rebase the median if a run of points above the median was observed.</p>
<p>However, for longer term monitoring, it may be necessary to identify and ‘reset’ a median if a sustained deterioration in performance occurs. Ideally, you should move to using SPC charts for monitoring purposes.</p>
</div>
<div id="were-not-supposed-to-do-this" class="section level2">
<h2 class="hasAnchor">
<a href="#were-not-supposed-to-do-this" class="anchor"></a>We’re not supposed to do this</h2>
<p>“But [insert QI expert name here] says you should not automatically rebase the median unless you know the signal is genuine”.</p>
<p>Yes, and no.</p>
<p>Truth is, sometimes, there is too much information being collected, or the task of manually performing this analysis is very time consuming, especially if you have to make manual adjustments to spreadsheets / databases / graphical outputs, to deadlines, whilst battling traditional BI tools that were only ever designed for bar and pie charts. Ultimately, I built this for me, to make my job easier. I believe other healthcare analysts, who work with QI data, will also find it beneficial.</p>
<p>Obviously, there is no guarantee that any run that is identified is a genuine improvement. The user needs to verify this, however, the package aims to save time in identifying these signals in the first place.</p>
<p>You can use the package to identify <em>potential</em> runs, and if necessary, modify the outputs (e.g. the sustained dataframe) to remove any false signals, and rebuild the plot manually.</p>
</div>
<div id="i-dont-like-the-final-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#i-dont-like-the-final-plot" class="anchor"></a>I don’t like the final plot</h2>
<p>You can use the package to do the analysis, take the outputs, and build your own plots. Or save the output to a variable, retrieve the runchart component, and pass further ggplot2 syntax to amend the colours, limits, labels etc.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#function-arguments-and-defaults">Function arguments and defaults</a><ul class="nav nav-pills nav-stacked">
<li><a href="#faceted-plots---1-column">Faceted plots - 1 column</a></li>
      <li><a href="#runs-in-both-directions">Runs in both directions</a></li>
      <li><a href="#design-decisions">Design decisions</a></li>
      <li><a href="#identify-runs-in-both-directions">Identify runs in both directions</a></li>
      <li><a href="#were-not-supposed-to-do-this">We’re not supposed to do this</a></li>
      <li><a href="#i-dont-like-the-final-plot">I don’t like the final plot</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by John MacKintosh.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
