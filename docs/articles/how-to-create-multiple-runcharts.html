<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>multiple-runcharts-in-sequence • runcharter</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="multiple-runcharts-in-sequence">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">runcharter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/how-to-create-faceted-runcharts.html">runcharter</a>
    </li>
    <li>
      <a href="../articles/how-to-create-multiple-runcharts.html">multiple-runcharts-in-sequence</a>
    </li>
    <li>
      <a href="../articles/how-to-create-single-runchart.html">individual-runcharts</a>
    </li>
    <li>
      <a href="../articles/plot-explanation.html">plot-explanation</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/johnmackintosh/runcharter">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>multiple-runcharts-in-sequence</h1>
                        <h4 class="author">John MacKintosh</h4>
            
            <h4 class="date">2018-12-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/johnmackintosh/runcharter/blob/master/vignettes/how-to-create-multiple-runcharts.Rmd"><code>vignettes/how-to-create-multiple-runcharts.Rmd</code></a></small>
      <div class="hidden name"><code>how-to-create-multiple-runcharts.Rmd</code></div>

    </div>

    
    
<div id="plot-multiple-charts-in-sequence" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-multiple-charts-in-sequence" class="anchor"></a>Plot multiple charts in sequence</h2>
<p>We’ve seen how to create a single runchart. What if we have several, or many, that we want to analyse and plot individually? We can take use the purrr and dplyr packages to assist with this task</p>
</div>
<div id="runs-below" class="section level2">
<h2 class="hasAnchor">
<a href="#runs-below" class="anchor"></a>Runs below</h2>
<p>Here we take the built-in dataset ‘signals’ and create a nested dataframe using tidyr’s nest() function. Because the “grp” column is used internally in the runcharter function, we create a dummy, outer grouping variable using it, purely for nesting purposes. We group by this dummy variable, create a nested dataframe, and use purrr::map to apply the runcharter function to each individual group in turn.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(runcharter)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyr)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(purrr)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>


 multiple_by_ward &lt;-<span class="st"> </span>signals <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">out_group =</span> grp) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">group_by</span>(out_group) <span class="op">%&gt;%</span>
<span class="st">    </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/nest.html">nest</a></span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">runcharts =</span> purrr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/purrr/topics/map">map</a></span>(data,runcharter,
                                  <span class="dt">med_rows =</span> <span class="dv">13</span>,
                                  <span class="dt">runlength =</span> <span class="dv">9</span>,
                                  <span class="dt">chart_title =</span> <span class="ot">NULL</span>,
                                  <span class="dt">chart_subtitle =</span> <span class="ot">NULL</span>,
                                  <span class="dt">direction =</span> <span class="st">"below"</span>,
                                  <span class="dt">faceted =</span> <span class="ot">FALSE</span>))
<span class="co">#&gt; all sustained runs found, not enough rows remaining for further analysis</span>
<span class="co">#&gt; Improvements noted, not enough rows remaining for further analysis</span>
<span class="co">#&gt; no sustained runs found</span>
<span class="co">#&gt; no sustained runs found</span></code></pre></div>
<p><img src="how-to-create-multiple-runcharts_files/figure-html/unnamed-chunk-1-1.png" width="576"><img src="how-to-create-multiple-runcharts_files/figure-html/unnamed-chunk-1-2.png" width="576"><img src="how-to-create-multiple-runcharts_files/figure-html/unnamed-chunk-1-3.png" width="576"><img src="how-to-create-multiple-runcharts_files/figure-html/unnamed-chunk-1-4.png" width="576"></p>
<p>The function will print the plots, and return a nested dataframe containing:</p>
<ul>
<li>the dummy grouping variable you specify (out-group in the example above),<br>
</li>
<li>data : a list of tibbles / dataframes containing the original data supplied</li>
<li>runcharts : a list containing individual ggplot objects for each chart, a ‘sustained’ tibble of the points in each period of improvement, the ‘median_rows’ showing the points used in calculating the original median,</li>
<li>‘StartBaseline’ which is simply the original median value, used internally for plotting purposes</li>
</ul>
<p>The latter 3 items can be retrieved from the list and used to create new plots (if, for example, you would like different plot themes or colours from the package defaults), or to create a faceted plot.</p>
</div>
<div id="runs-above-the-median" class="section level2">
<h2 class="hasAnchor">
<a href="#runs-above-the-median" class="anchor"></a>Runs above the median</h2>
<p>It is not recommended to use very short runs as a basis for evidencing improvement. The following example is used only to demonstrate that the runcharter function will find multiple successive runs in the desired direction</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(runcharter)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyr)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(purrr)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)

 by_ward_above &lt;-<span class="st"> </span>signals <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">out_group =</span> grp) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">group_by</span>(out_group) <span class="op">%&gt;%</span>
<span class="st">    </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/nest.html">nest</a></span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">runcharts =</span> purrr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/purrr/topics/map">map</a></span>(data,runcharter,
                                  <span class="dt">med_rows =</span> <span class="dv">3</span>,
                                  <span class="dt">runlength =</span> <span class="dv">3</span>,
                                  <span class="dt">chart_title =</span> <span class="ot">NULL</span>,
                                  <span class="dt">chart_subtitle =</span> <span class="ot">NULL</span>,
                                  <span class="dt">direction =</span> <span class="st">"above"</span>, 
                                  <span class="dt">faceted =</span> <span class="ot">FALSE</span>))
<span class="co">#&gt; no sustained runs found</span>
<span class="co">#&gt; all sustained runs found, not enough rows remaining for further analysis</span>
<span class="co">#&gt; all sustained runs found, not enough rows remaining for further analysis</span>
<span class="co">#&gt; all sustained runs found, not enough rows remaining for further analysis</span></code></pre></div>
<p><img src="how-to-create-multiple-runcharts_files/figure-html/unnamed-chunk-2-1.png" width="576"><img src="how-to-create-multiple-runcharts_files/figure-html/unnamed-chunk-2-2.png" width="576"><img src="how-to-create-multiple-runcharts_files/figure-html/unnamed-chunk-2-3.png" width="576"><img src="how-to-create-multiple-runcharts_files/figure-html/unnamed-chunk-2-4.png" width="576"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#plot-multiple-charts-in-sequence">Plot multiple charts in sequence</a></li>
      <li><a href="#runs-below">Runs below</a></li>
      <li><a href="#runs-above-the-median">Runs above the median</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by John MacKintosh.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
