<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Automatically plot, analyse and rebase multiple run charts • runcharter</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Automatically plot, analyse and rebase multiple run charts">
<meta property="og:description" content="Plots multiple run charts, finds successive signals of improvement, and rebases medians.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">runcharter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/runcharter.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/how-to-create-multiple-runcharts.html">How to create multiple runcharts</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/johnmackintosh/runcharter">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="runcharter" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#runcharter" class="anchor"></a>runcharter <img src="reference/figures/logo.png" width="160px" align="right">
</h1></div>
<p>Automated analysis and re-basing of run charts at scale.</p>
<p>Online documentation and vignettes : <a href="https://www.johnmackintosh.com/runcharter/">runcharter</a></p>
<p><a href="https://travis-ci.org/johnmackintosh/runcharter"><img src="https://travis-ci.org/johnmackintosh/runcharter.svg?branch=Master" alt="Build Status"></a> <a href="https://www.repostatus.org/#wip"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a> <a href="https://codecov.io/github/johnmackintosh/runcharter?branch=master"><img src="https://codecov.io/gh/johnmackintosh/runcharter/branch/master/graph/badge.svg" alt="Coverage status"></a></p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install runcharter from github with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"johnmackintosh/runcharter"</span>)

<span class="co"># to ensure the vignettes are built or ensure latest version is installed:</span>

devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"johnmackintosh/runcharter"</span>, 
                         <span class="dt">build_vignettes =</span> <span class="ot">TRUE</span>, <span class="dt">force =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="rationale" class="section level2">
<h2 class="hasAnchor">
<a href="#rationale" class="anchor"></a>Rationale</h2>
<p>Run charts are easy to create and analyse on an individual basis, hence they are widely used in healthcare quality improvement.</p>
<p>A run chart is a regular line chart, with a central reference line.</p>
<p>This central line, calculated using the median of a number of values over a baseline period, allows the QI team to assess if any statistically significant improvement is taking place, as a result of their improvement initiatives.</p>
<p>These improvements are denoted by certain patterns, or signals, within the plotted data points, in relation to the median line. The main signal is a run of 9 or more consecutive values on the desired side of the median line.</p>
<p>If this signal occurs as a result of improvement activities, but performance is not yet at the target level, a new median line can be plotted.</p>
<p>This is calculated using the median of the points that contributed to the signal. The aim is to then continue to work on improvement, measure and plot data, and look for the next sustained signal, until the improvement initiative is operating at its target level.</p>
<p>While this ‘rebasing’ (calculating new medians) is manageable for a few charts, it quickly becomes labour intensive as QI initiatives expand or further QI programmes are launched.</p>
<p>While enterprise level database software can be used to store the raw data, their associated reporting systems are usually ill suited to the task of analysing QI data using run chart rules.</p>
<p>This package automatically creates rebased run charts, based on the run chart rule for sustained improvement commonly used in healthcare ( 9 consecutive points on the desired side of the median).</p>
<p>All sustained runs of improvement, in the desired direction, will be highlighted and the median re-phased, using the points that contributed to the run.</p>
<p>Non useful observations (points on the median) are ignored and are not highlighted.</p>
<p>The main motivation is to analyse many charts at once, but you can also create and analyse a single run chart, or iterate, plot and save many individual charts.</p>
</div>
<div id="the-runcharter-function---input" class="section level2">
<h2 class="hasAnchor">
<a href="#the-runcharter-function---input" class="anchor"></a>The runcharter function - input</h2>
<p>The function requires a simple three column dataframe, with the following column names</p>
<ul>
<li>grp : a character column indicating a grouping variable to identify each individual run chart and for faceted plots</li>
<li>date : a column of type ‘date’.</li>
<li>y : the variable / value to plot.</li>
</ul>
</div>
<div id="runcharter-function-arguments" class="section level2">
<h2 class="hasAnchor">
<a href="#runcharter-function-arguments" class="anchor"></a>runcharter function arguments</h2>
<ul>
<li>df : a three column dataframe with columns named ‘grp’, ‘date’ and ‘y’ as specified above</li>
<li>med_rows : How many rows / data points should the initial baseline median be calculated over?</li>
<li>runlength : How long a run of consecutive points do you want to find, before you rebase the median? The median will be rebased using all useful observations (points on the median are not useful, and are ignored).</li>
<li>chart_title : The main title for the chart</li>
<li>chart_subtitle : A subtitle for the chart</li>
<li>direction : “above” or “below” the median. The function will only look for successive runs in one direction at a time. It will not look for alternating runs in both directions.</li>
<li>faceted : defaults to TRUE. Set to FALSE if you only need to plot a single run chart.</li>
<li>facet_cols : the number of columns in a faceted plot - only required if faceted is set to TRUE, otherwise ignored</li>
<li>save_plot : Calls ggsave if TRUE, saving in the current working directory</li>
<li>plot_extension : one of “png”,“pdf” or other valid extension for saving ggplot2 plots. Used in the call to ggsave.</li>
</ul>
</div>
<div id="example-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#example-plot" class="anchor"></a>example plot</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(runcharter)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)
<span class="co">#&gt; Warning: package 'dplyr' was built under R version 3.5.2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>

single &lt;-<span class="st"> </span>signals <span class="op">%&gt;%</span>
dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(grp <span class="op">==</span><span class="st"> "WardX"</span>) <span class="op">%&gt;%</span>
<span class="kw"><a href="reference/runcharter.html">runcharter</a></span>(<span class="dt">med_rows =</span> <span class="dv">13</span>,
<span class="dt">runlength =</span> <span class="dv">9</span>,
<span class="dt">chart_title =</span> <span class="st">"Analysis of runs below median"</span>,
<span class="dt">chart_subtitle =</span> <span class="st">"Ward X"</span>,
<span class="dt">direction =</span> <span class="st">"below"</span>,
<span class="dt">faceted =</span>  <span class="ot">FALSE</span>)
<span class="co">#&gt; all sustained runs found, not enough rows remaining for further analysis</span></code></pre></div>
<div class="figure">
<img src="reference/figures/unnamed-chunk-2-1.png" alt="One plot, one run below the median" width="700"><p class="caption">
One plot, one run below the median
</p>
</div>
</div>
<div id="plot-explanation" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-explanation" class="anchor"></a>Plot explanation</h2>
<ul>
<li><p><code>med_rows</code> defines the initial baseline period. In the example below, the first 13 points are used to calculate the initial median. This is represented with a solid orange horizontal line. This median is then used as a reference for the remaining values, denoted by the extending orange dashed line</p></li>
<li><p><code>runlength</code> specifies the length of run to be identified. Along with <code>direction</code>, which specifies which side of median represents improvement, the runlength is your target number of successive points on the desired side of the median (points on the median are ignored as they do not make or break a run).</p></li>
</ul>
<p>If a run is identified, the points are highlighted (the purple coloured points), and a new median is calculated using them. The median is also plotted and extended into the future for further run chart rules analysis, with a new set of solid and dashed horizontal lines.</p>
<p>The analysis continues, rebasing any further runs, until no more runs are found or there are not enough data points remaining.</p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>By default the function returns a faceted plot, highlighting successive runs below the median:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(runcharter)
<span class="kw"><a href="reference/runcharter.html">runcharter</a></span>(signals, <span class="dt">facet_cols =</span> <span class="dv">2</span>)
<span class="co">#&gt; $runchart</span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-3-1.png" width="768"></p>
<pre><code>#&gt; 
#&gt; $median_rows
#&gt; # A tibble: 52 x 4
#&gt;    grp       y date       baseline
#&gt;    &lt;chr&gt; &lt;int&gt; &lt;date&gt;        &lt;int&gt;
#&gt;  1 WardX     9 2014-01-01       11
#&gt;  2 WardX    22 2014-02-01       11
#&gt;  3 WardX    19 2014-03-01       11
#&gt;  4 WardX    18 2014-04-01       11
#&gt;  5 WardX     8 2014-05-01       11
#&gt;  6 WardX     7 2014-06-01       11
#&gt;  7 WardX    11 2014-07-01       11
#&gt;  8 WardX    11 2014-08-01       11
#&gt;  9 WardX    11 2014-09-01       11
#&gt; 10 WardX    12 2014-10-01       11
#&gt; # ... with 42 more rows
#&gt; 
#&gt; $sustained
#&gt; # A tibble: 18 x 10
#&gt;    grp       y date        flag rungroup cusum improve startdate 
#&gt;    &lt;chr&gt; &lt;int&gt; &lt;date&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;int&gt; &lt;date&gt;    
#&gt;  1 WardX     7 2016-12-01    -1        1    -1       6 2016-12-01
#&gt;  2 WardX     5 2017-01-01    -1        1    -2       6 2016-12-01
#&gt;  3 WardX     4 2017-02-01    -1        1    -3       6 2016-12-01
#&gt;  4 WardX    10 2017-03-01    -1        1    -4       6 2016-12-01
#&gt;  5 WardX     4 2017-04-01    -1        1    -5       6 2016-12-01
#&gt;  6 WardX     9 2017-05-01    -1        1    -6       6 2016-12-01
#&gt;  7 WardX     4 2017-06-01    -1        1    -7       6 2016-12-01
#&gt;  8 WardX     8 2017-07-01    -1        1    -8       6 2016-12-01
#&gt;  9 WardX     6 2017-08-01    -1        1    -9       6 2016-12-01
#&gt; 10 WardY     7 2017-10-01    -1        1    -1       8 2017-10-01
#&gt; 11 WardY     3 2017-11-01    -1        1    -2       8 2017-10-01
#&gt; 12 WardY     8 2017-12-01    -1        1    -3       8 2017-10-01
#&gt; 13 WardY    11 2018-01-01    -1        1    -4       8 2017-10-01
#&gt; 14 WardY     7 2018-02-01    -1        1    -5       8 2017-10-01
#&gt; 15 WardY     9 2018-03-01    -1        1    -6       8 2017-10-01
#&gt; 16 WardY     8 2018-04-01    -1        1    -7       8 2017-10-01
#&gt; 17 WardY     8 2018-05-01    -1        1    -8       8 2017-10-01
#&gt; 18 WardY     7 2018-06-01    -1        1    -9       8 2017-10-01
#&gt; # ... with 2 more variables: enddate &lt;date&gt;, lastdate &lt;date&gt;
#&gt; 
#&gt; $StartBaseline
#&gt; [1] 11 13  4  7</code></pre>
<p>The function will print the plot, and return a list, containing:</p>
<ul>
<li>a ggplot2 object,<br>
</li>
<li>a dataframe / tibble containing the rows of data used to calculate the baseline median</li>
<li>if applicable, a dataframe / tibble showing the points in each sustained period of improvement.</li>
<li>the initial baseline median value</li>
</ul>
<p>The latter 3 items can be retrieved from the list and used to create new plots (if, for example, you would like different plot themes or colours from the package defaults)</p>
<p>Don’t try this at home - setting runlength of 3 to show that successive runs are identified:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)
signals <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(date <span class="op">&lt;=</span><span class="st"> '2015-12-01'</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="reference/runcharter.html">runcharter</a></span>(<span class="dt">med_rows =</span> <span class="dv">3</span>,
             <span class="dt">runlength =</span> <span class="dv">3</span>, 
             <span class="dt">direction =</span> <span class="st">"above"</span>,
             <span class="dt">faceted =</span> <span class="ot">TRUE</span>,
              <span class="dt">facet_cols =</span> <span class="dv">2</span>)
<span class="co">#&gt; $runchart</span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-4-1.png" width="768"></p>
<pre><code>#&gt; 
#&gt; $median_rows
#&gt; # A tibble: 12 x 4
#&gt;    grp       y date       baseline
#&gt;    &lt;chr&gt; &lt;int&gt; &lt;date&gt;        &lt;int&gt;
#&gt;  1 WardX     9 2014-01-01       19
#&gt;  2 WardX    22 2014-02-01       19
#&gt;  3 WardX    19 2014-03-01       19
#&gt;  4 WardY    11 2014-01-01       11
#&gt;  5 WardY    18 2014-02-01       11
#&gt;  6 WardY     5 2014-03-01       11
#&gt;  7 WardZ     2 2014-01-01        3
#&gt;  8 WardZ     6 2014-02-01        3
#&gt;  9 WardZ     3 2014-03-01        3
#&gt; 10 WardV     5 2014-01-01        3
#&gt; 11 WardV     3 2014-02-01        3
#&gt; 12 WardV     3 2014-03-01        3
#&gt; 
#&gt; $sustained
#&gt; # A tibble: 24 x 10
#&gt;    grp       y date        flag rungroup cusum improve startdate 
#&gt;    &lt;chr&gt; &lt;int&gt; &lt;date&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;int&gt; &lt;date&gt;    
#&gt;  1 WardY    14 2014-04-01     1        1     1      14 2014-04-01
#&gt;  2 WardY    12 2014-05-01     1        1     2      14 2014-04-01
#&gt;  3 WardY    14 2014-06-01     1        1     3      14 2014-04-01
#&gt;  4 WardY    16 2014-12-01     1        2     1      18 2014-12-01
#&gt;  5 WardY    19 2015-01-01     1        2     2      18 2014-12-01
#&gt;  6 WardY    18 2015-02-01     1        2     3      18 2014-12-01
#&gt;  7 WardY    20 2015-03-01     1        3     1      19 2015-03-01
#&gt;  8 WardY    19 2015-04-01     1        3     2      19 2015-03-01
#&gt;  9 WardY    19 2015-05-01     1        3     3      19 2015-03-01
#&gt; 10 WardZ     4 2014-04-01     1        1     1       5 2014-04-01
#&gt; # ... with 14 more rows, and 2 more variables: enddate &lt;date&gt;,
#&gt; #   lastdate &lt;date&gt;
#&gt; 
#&gt; $StartBaseline
#&gt; [1] 19 11  3  3</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/johnmackintosh/runcharter">https://​github.com/​johnmackintosh/​runcharter</a>
</li>
<li>Report a bug at <br><a href="https://github.com/johnmackintosh/runcharter/issues">https://​github.com/​johnmackintosh/​runcharter/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>John MacKintosh <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by John MacKintosh.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
